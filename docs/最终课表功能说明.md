# 最终课表功能说明

**Created:** 2026-01-23
**Last Updated:** 2026-01-23
**Purpose:** 说明最终课表页面的功能和使用方法

---

## 概述

最终课表页面用于显示所有已经被排课系统解决好的课程，并提供多种视角的筛选和导出功能。

## 功能特性

### 1. 三种视图模式

#### 学生模式
- 显示每个学生的完整课表
- 包含匹配好的老师和教室信息
- 可以单独选择某个学生查看其课表
- 支持导出单个学生或全部学生的课表

#### 老师模式
- 显示每个老师的完整课表
- 包含匹配好的学生和教室信息
- 可以单独选择某个老师查看其课表
- 支持导出单个老师或全部老师的课表

#### 教室模式
- 显示每个教室的完整课表
- 包含匹配好的老师和学生信息
- 可以单独选择某个教室查看其课表
- 支持导出单个教室或全部教室的课表

### 2. 周视图课表

- 以周为单位显示课程安排
- 支持周一到周日的完整视图
- 每天按时间顺序排列课程
- 课程卡片包含：
  - 上课时间
  - 课程名称
  - 学生/老师/教室信息（根据视图模式动态显示）
  - 校区信息

### 3. 筛选功能

- 侧边栏提供筛选列表
- 可以选择"全部"或单独的学生/老师/教室
- 实时显示每个选项对应的课程数量
- 筛选结果立即反映在课表视图中

### 4. 导出功能

- 支持导出当前筛选的课表为文本文件
- 导出内容包含：
  - 课表标题
  - 按星期分组的课程列表
  - 详细的课程信息（时间、课程名称、相关人员、校区等）
- 文件格式：UTF-8 编码的文本文件

## 测试数据

页面包含以下测试数据（需开启"测试数据"开关）：

### 学生
- 张三（2门课程）
- 王五（1门课程）
- 李四（2门课程）
- 赵六（1门课程）

### 老师
- 李老师（3门课程）
- 赵老师（2门课程）
- 孙老师（1门课程）

### 教室
- 个别指导室1（2门课程）
- 板二101（2门课程）
- 个别指导室2（2门课程）

### 课程类型
- 1v1大学面试练习
- 1v1志望理由书指导
- 1v1EJU日语
- 1v1小论文辅导
- 1v1校内考准备

## 使用步骤

1. **启用测试数据**
   - 点击左下角的"测试数据"按钮开启测试数据显示

2. **选择视图模式**
   - 在页面顶部选择学生模式、老师模式或教室模式之一

3. **筛选课表**
   - 在左侧筛选栏中选择"全部"或特定的学生/老师/教室
   - 课表会自动更新显示相关课程

4. **查看课表**
   - 周视图显示一周七天的课程安排
   - 每个课程卡片包含详细信息
   - 鼠标悬停可查看更多细节

5. **导出课表**
   - 点击右上角的"导出课表"按钮
   - 系统会根据当前筛选条件生成并下载文本文件

## 技术实现

### 文件结构
```
frontend/src/XdfClassArranger/FinalSchedule/
├── FinalSchedule.jsx       # 主组件
└── FinalSchedule.css       # 样式文件
```

### 主要组件

- **FinalSchedule**: 主容器组件
  - 视图模式切换
  - 课表数据管理
  - 筛选逻辑
  - 导出功能

### 路由配置

- 路径: `/finalschedule`
- 在 `App.jsx` 中已注册
- 在 `XdfLayout.jsx` 侧边栏菜单中已添加入口

## 响应式设计

- **桌面端（>1400px）**: 显示完整的7天视图
- **平板端（1024px-1400px）**: 显示5天视图
- **移动端（<768px）**: 显示2-3天视图，筛选栏移至顶部
- **小屏手机（<480px）**: 单天视图，垂直滚动

## 未来扩展

当排课功能实现后，可以：

1. **连接真实数据**
   - 替换测试数据为后端API返回的真实排课结果
   - 实现实时数据更新

2. **增强导出功能**
   - 支持导出为Excel格式
   - 支持导出为PDF格式
   - 支持打印功能

3. **添加编辑功能**
   - 允许手动调整课程时间
   - 支持课程备注功能
   - 支持课程状态标记

4. **统计分析**
   - 显示教室使用率
   - 显示老师工作负载
   - 显示学生课程分布

5. **通知功能**
   - 课表变更通知
   - 邮件/短信提醒
   - 导出后自动发送给相关人员

## 注意事项

- 确保已开启"测试数据"开关才能看到示例数据
- 导出功能在没有课程数据时会被禁用
- 页面会自动保存视图模式选择
- 筛选条件在切换视图模式时会重置为"全部"

---

## 相关文件

- `frontend/src/XdfClassArranger/FinalSchedule/FinalSchedule.jsx`
- `frontend/src/XdfClassArranger/FinalSchedule/FinalSchedule.css`
- `frontend/src/App.jsx` (路由配置)
- `frontend/src/XdfClassArranger/XdfLayout.jsx` (侧边栏菜单)

