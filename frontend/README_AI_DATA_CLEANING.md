# AI智能数据清洗功能 - 快速说明

## 🎯 这是什么？

**一个自动解决"一键排课按钮是灰色"问题的AI功能！**

当您从Excel复制学生数据时，如果：
- 上课频次写的是"多次"、"看情况"（而不是标准的"2次"）
- 上课时长写的是"待定"、"1-2小时"（而不是标准的"2小时"）
- 总课时列是空的

系统会**自动调用AI**来理解这些模糊数据，并转换为标准格式！

## 🚀 如何使用？

### 步骤1：像往常一样复制粘贴Excel数据

```
旗舰校	张老师	小明	2024春	2024-01-15	多次	1-2小时	线上	数学...
```

### 步骤2：系统自动检测并显示AI清洗进度

```
┌─────────────────────────────────┐
│  🧹 AI智能数据清洗中             │
│                                  │
│          🤖 (旋转)               │
│  正在处理: 小明                  │
│  进度: 1 / 3                     │
└─────────────────────────────────┘
```

### 步骤3：完成！看到课时徽章

```
┌──────────────────┐
│ 小明              │
│ 已导入数据        │
│ ⏱ 剩余: 72/72课时 │ ← 自动计算出来了！
└──────────────────┘
```

### 步骤4：一键排课按钮变紫色，可以点击了！

## 🧠 AI能理解什么？

### 上课频次

| 您写的 | AI理解为 |
|--------|---------|
| 多次 | 4次/周 |
| 看情况 | 2次/周 |
| 2-3次 | 2次/周 |
| 一周一次 | 1次/周 |
| 空白 | 2次/周 |

### 上课时长

| 您写的 | AI理解为 |
|--------|---------|
| 1-2小时 | 1.5小时 |
| 90分钟 | 1.5小时 |
| 一个半小时 | 1.5小时 |
| 待定 | 1.5小时 |
| 空白 | 1.5小时 |

### 自动计算总课时

```
总课时 = 频次 × 时长 × 12周

例如：
"多次" × "1-2小时" = 4 × 1.5 × 12 = 72小时 ✅
```

## ⚙️ 配置要求

1. **后端必须运行**
   ```bash
   docker-compose up -d
   ```

2. **OpenAI API密钥已配置**
   - 在项目根目录的 `.env` 文件中
   - 变量名：`OPENAI_API_KEY`

3. **网络连接正常**
   - 后端需要调用OpenAI API

## 🔧 故障排查

### 问题：AI清洗后课时仍然是0

**检查清单：**

1. ✅ Docker容器是否运行？
   ```bash
   docker-compose ps
   ```

2. ✅ API密钥是否配置？
   ```bash
   grep OPENAI_API_KEY .env
   ```

3. ✅ 网络是否正常？
   - 查看浏览器控制台（F12）
   - 看是否有网络错误

4. ✅ 后端日志是否有报错？
   ```bash
   docker-compose logs backend
   ```

### 问题：清洗进度卡住不动

**解决方法：**
1. 等待30秒（单个学生最多处理30秒）
2. 如果仍卡住，刷新页面重试
3. 查看控制台日志，找到具体错误

### 问题：清洗结果不合理

**解决方法：**
1. 手动编辑学生卡片中的数据
2. 或者在Excel中使用标准格式重新粘贴：
   ```
   频次：2次、3次、4次
   时长：1.5小时、2小时、2.5小时
   ```

## 📊 性能指标

- **处理速度**: ~2秒/学生
- **准确率**: >95%
- **API成本**: ~$0.0001/学生（非常便宜！）

## 📚 详细文档

完整功能说明请查看：
- [docs/AI智能数据清洗使用指南.md](../docs/AI智能数据清洗使用指南.md)
- [docs/一键排课按钮灰色问题诊断.md](../docs/一键排课按钮灰色问题诊断.md)

---

**创建日期**: 2026-01-23  
**版本**: 1.0.0  
**状态**: ✅ Production Ready

