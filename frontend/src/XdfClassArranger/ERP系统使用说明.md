# [目标] 前途塾ERP排课系统 - 完整使用指南

## [列表] 系统概述

一个现代化、扁平化设计的ERP排课管理系统，包含三个核心功能模块，支持桌面和移动端。

---

## [构建]️ 系统架构

### 文件结构

```
XdfClassArranger/
├── XdfLayout.js              # ERP主布局（侧边栏）
├── XdfLayout.css             # 布局样式
├── Dashboard/                # Dashboard页面
│   ├── Dashboard.js
│   └── Dashboard.css
├── Function/                 # 排课功能页面
│   ├── Function.js
│   └── Function.css
├── MyPage/                   # 我的主页
│   ├── MyPage.js
│   └── MyPage.css
└── Programming/              # 数据文件夹
```

### 路由配置

| 路由路径 | 页面名称 | 功能描述 |
|---------|---------|---------|
| `/XdfClassArranger_dashboard` | Dashboard | 数据概览、统计信息 |
| `/XdfClassArranger_function` | 排课功能 | 日历视图、课程管理 |
| `/XdfClassArranger_MyPage` | 我的主页 | 个人信息、活动记录 |

---

## [特性] 核心功能

### 1. [数据] Dashboard（数据面板）

#### 功能特性
- **实时统计**
  - 今日课程数量
  - 本周排课统计
  - 活跃学生数量
  - 教室使用率

- **今日课程列表**
  - 显示所有今日安排的课程
  - 状态标识（进行中/已安排/已完成）
  - 学生和教师信息
  - 时间段显示

- **快速操作**
  - 新建课程
  - 查看日历
  - 学生管理
  - 报表导出

#### UI特点
- 渐变色统计卡片
- 趋势对比显示
- 清晰的状态徽章
- 响应式网格布局

### 2. [日历] 排课功能（Function）

#### 核心功能
- **日历视图**
  - 月视图
  - 周视图
  - 日视图

- **交互操作**
  - [√] 拖拽选择创建课程
  - [√] 点击查看课程详情
  - [√] 双击快速编辑
  - [√] 拖动改变时间
  - [√] 拖动边缘调整时长
  - [√] 删除课程

- **事件信息**
  - 课程名称
  - 学生姓名
  - 授课教师
  - 校区位置
  - 教室编号
  - 课程描述

#### 使用方法
1. **创建课程**: 在日历上拖拽选择时间段 → 输入课程名称
2. **查看详情**: 单击任意课程事件 → 查看完整信息
3. **编辑名称**: 双击课程 → 输入新名称
4. **调整时间**: 拖动课程到新位置
5. **修改时长**: 拖动课程边缘
6. **删除课程**: 点击课程 → 详情弹窗 → 删除按钮

### 3. [用户] 我的主页（MyPage）

#### 个人信息
- 用户头像（渐变色）
- 姓名和角色
- 联系方式（邮箱、电话）
- 部门信息
- 加入时间

#### 数据统计
- 排课总数
- 活跃学生数
- 合作教师数
- 教室数量

#### 最近活动
- 创建课程记录
- 修改课程记录
- 删除课程记录
- 添加学生记录
- 更新教室记录

---

## [设计] 设计语言

### 颜色系统

#### 主色调
```css
渐变紫: linear-gradient(135deg, #667eea 0%, #764ba2 100%)
```

#### 功能色
- **成功绿**: `#34c759` - 已完成、成功状态
- **警告橙**: `#ff9500` - 警告、待处理
- **错误红**: `#ff3b30` - 删除、错误
- **信息蓝**: `#5ac8fa` - 信息提示
- **主题紫**: `#667eea` - 进行中、主操作

#### 中性色
- **文本主色**: `#0f172a`
- **文本副色**: `#64748b`
- **背景色**: `#f8fafc`
- **白色**: `#ffffff`
- **边框色**: `#e2e8f0`

### 圆角系统
- 小圆角: `8px` - 按钮
- 中圆角: `10-12px` - 卡片内元素
- 大圆角: `16-20px` - 主要卡片
- 圆形: `50%` - 头像、图标

### 间距系统
- 极小: `4px`
- 小: `8px`
- 中: `12px`
- 标准: `16px`
- 大: `20px`
- 较大: `24px`
- 特大: `32px`

### 阴影系统
```css
轻阴影: 0 1px 3px rgba(0, 0, 0, 0.05)
中阴影: 0 4px 12px rgba(0, 0, 0, 0.05)
重阴影: 0 20px 60px rgba(0, 0, 0, 0.25)
```

---

## [移动] 响应式设计

### 断点设置

#### 桌面端（>1024px）
- 侧边栏: 260px 宽度
- 完整功能显示
- 多列网格布局

#### 平板端（768px - 1024px）
- 侧边栏: 240px 宽度
- 保持大部分功能
- 自适应网格

#### 移动端（<768px）
- 侧边栏: 固定定位，280px 宽度
- 顶部导航栏显示
- 汉堡菜单按钮
- 单列布局
- 触摸优化

### 移动端特性

#### 顶部栏
- 左侧: 汉堡菜单按钮
- 中间: 系统标题
- 右侧: 用户头像

#### 侧边栏
- 默认隐藏
- 点击菜单按钮展开
- 全屏遮罩
- 从左滑入动画

---

## [目标] 侧边栏导航

### 结构设计

#### 顶部区域
- Logo图标（渐变色钻石）
- 系统名称：前途塾ERP
- 折叠/展开按钮（桌面端）

#### 导航菜单
```
[数据] Dashboard    - 数据概览
[日历] 排课功能     - 日历管理
[用户] 我的主页     - 个人中心
```

#### 底部区域
- 用户头像
- 用户名称
- 角色标签

### 交互特性

#### 悬停效果
- 背景色变化
- 平滑过渡
- 视觉反馈

#### 激活状态
- 渐变背景色
- 右侧指示条
- 加粗文字

#### 折叠模式（桌面）
- 宽度: 80px
- 仅显示图标
- 保持功能完整

---

## [技术] 技术实现

### 核心技术栈
- **React 18.3.1** - UI框架
- **React Router 6** - 路由管理
- **FullCalendar 6** - 日历组件
- **CSS3** - 样式系统

### 关键组件

#### XdfLayout
```jsx
<XdfLayout>
  {children || <Outlet />}
</XdfLayout>
```
- 侧边栏管理
- 移动端菜单
- 路由状态追踪

#### Dashboard
- 统计卡片网格
- 课程列表
- 快速操作

#### Function
- FullCalendar集成
- 事件管理
- 模态弹窗

#### MyPage
- 用户信息展示
- 活动时间线
- 数据统计

---

## [开始] 启动指南

### 1. 启动应用
```bash
cd /Users/benz/Desktop/Stanford/FA25/sci_tokyo/sci_tokyo
npm start
```

### 2. 访问页面

#### Dashboard
```
http://localhost:3000/XdfClassArranger_dashboard
```
- 查看数据概览
- 今日课程安排
- 快速操作入口

#### 排课功能
```
http://localhost:3000/XdfClassArranger_function
```
- 日历视图
- 创建/编辑/删除课程
- 拖拽交互

#### 我的主页
```
http://localhost:3000/XdfClassArranger_MyPage
```
- 个人信息
- 活动记录
- 数据统计

### 3. 导航方式

#### 侧边栏导航
- 点击菜单项切换页面
- 当前页面高亮显示
- 平滑过渡动画

#### 移动端导航
1. 点击左上角菜单按钮
2. 选择目标页面
3. 自动关闭菜单

---

## [目标] 使用场景

### Dashboard - 晨会/管理
- **场景**: 每日晨会、管理层汇报
- **用途**: 
  - 快速了解今日课程安排
  - 查看关键数据指标
  - 发现异常情况
  - 进行快速操作

### Function - 日常排课
- **场景**: 教务人员日常工作
- **用途**:
  - 安排新课程
  - 调整课程时间
  - 处理冲突
  - 查看整体安排

### MyPage - 个人管理
- **场景**: 个人工作回顾
- **用途**:
  - 查看个人信息
  - 了解工作量
  - 回顾操作历史
  - 更新个人资料

---

## [配置] 自定义配置

### 修改颜色
编辑各页面的 CSS 文件中的颜色变量：
```css
/* Dashboard.css, Function.css, MyPage.css */
--primary-color: #667eea;
--success-color: #34c759;
--warning-color: #ff9500;
```

### 调整布局
编辑 `XdfLayout.css`：
```css
/* 侧边栏宽度 */
.erp-sidebar {
  width: 260px;
}

/* 折叠后宽度 */
.erp-sidebar.collapsed {
  width: 80px;
}
```

### 添加菜单项
编辑 `XdfLayout.js` 中的 `menuItems` 数组：
```javascript
const menuItems = [
  {
    id: 'new-page',
    name: '新页面',
    path: '/XdfClassArranger_newpage',
    icon: <svg>...</svg>
  }
];
```

---

## [数据] 数据流

### Dashboard数据
```javascript
const statsCards = [
  { title: '今日课程', value: '12', change: '+3', trend: 'up' }
];

const recentClasses = [
  { student: '张三', course: '面试练习', status: 'ongoing' }
];
```

### Function数据
```javascript
const events = [
  {
    id: '1',
    title: '面试练习 - 张三',
    start: '2025-12-10T10:00:00',
    end: '2025-12-10T12:00:00',
    backgroundColor: '#FF3B30',
    extendedProps: {
      student: '张三',
      teacher: '李老师',
      campus: '旗舰校',
      room: '个别指导室1'
    }
  }
];
```

### MyPage数据
```javascript
const userInfo = {
  name: '管理员',
  role: '系统管理员',
  email: 'admin@sci-tokyo.com'
};

const recentActivities = [
  { action: '创建新课程', detail: '...', time: '2小时前' }
];
```

---

## [学习] 最佳实践

### 1. 页面加载
- [√] 使用懒加载
- [√] 优化图片资源
- [√] 减少首屏时间

### 2. 用户体验
- [√] 即时反馈
- [√] 加载状态
- [√] 错误提示
- [√] 操作确认

### 3. 性能优化
- [√] React.memo 包装组件
- [√] useCallback 缓存函数
- [√] useMemo 缓存计算
- [√] 虚拟滚动（大列表）

### 4. 移动端优化
- [√] 触摸目标 >44px
- [√] 防止误触
- [√] 手势支持
- [√] 减少动画

---

## [搜索] 故障排查

### 侧边栏不显示
```bash
检查：
1. XdfLayout.css 是否正确导入
2. 浏览器控制台是否有错误
3. 路由配置是否正确
```

### 页面路由404
```bash
检查：
1. index.js 中是否正确导入组件
2. 路由路径是否匹配
3. 组件是否正确导出
```

### 移动端菜单无法关闭
```bash
检查：
1. onClick 事件是否绑定
2. state 更新是否正常
3. 遮罩层是否渲染
```

### 日历不显示事件
```bash
检查：
1. events 数组格式是否正确
2. 时间格式是否为 ISO 8601
3. FullCalendar 插件是否加载
```

---

## [文档] 扩展开发

### 添加新页面
1. 创建页面文件夹和组件
2. 在 `index.js` 导入
3. 添加路由配置
4. 在 `XdfLayout.js` 添加菜单项

### 集成后端API
```javascript
// 获取数据
const fetchData = async () => {
  const response = await fetch('/api/dashboard');
  const data = await response.json();
  setStats(data);
};
```

### 添加权限控制
```javascript
// 检查用户权限
const hasPermission = (action) => {
  return userPermissions.includes(action);
};
```

---

## [√] 完成清单

- [√] ERP布局和侧边栏
- [√] Dashboard页面
- [√] 排课功能页面
- [√] 我的主页
- [√] 路由配置
- [√] 响应式设计
- [√] 移动端适配
- [√] 现代化扁平风格
- [√] 完整文档

---

**版本**: v1.0.0  
**更新日期**: 2026-01-08  
**开发团队**: 前途塾技术部

