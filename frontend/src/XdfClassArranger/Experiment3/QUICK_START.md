# Experiment3 快速开始指南

## 🎯 核心改进

**Experiment3现已完全可用！**

✅ **排课功能**: 从不工作 → 完全工作  
✅ **日历显示**: 从有bug → 无bug，清晰显示  
✅ **算法选择**: 从无 → 3种算法可选  
✅ **视图模式**: 从单一 → 混合视图（周视图+月视图）

## 🚀 30秒快速使用

1. 访问 `/experiment3` 页面
2. 粘贴学生Excel数据 → 解析 → 导入
3. 粘贴教师数据 → 解析 → 导入  
4. 粘贴教室数据 → 解析 → 导入
5. 勾选学生 → 点击"一键排课" → 查看结果

## 📋 新增功能

### 1. 算法选择器（日历上方）

```
[排课算法: ▼]
├── 贪心算法（快速）      ← 快速但可能非最优
├── 三方匹配V2（推荐）    ← 平衡速度和质量⭐
└── 原始引擎（实验）      ← 仅用于实验
```

### 2. 视图切换器（日历上方）

```
[周视图（排课结果）| 月视图（完整日历）]
     ↑                    ↑
  清晰简洁              功能完整
  可拖拽调整            查看可用性
```

### 3. 实时统计（日历上方）

```
[✓ 5人] [共12节课] [成功率100%] [⚠️ 2个冲突]
```

## 📊 三种算法对比

| 算法 | 速度 | 成功率 | 推荐场景 |
|------|------|--------|----------|
| 贪心算法 | ⭐⭐⭐⭐⭐ 最快 | ⭐⭐⭐ | 简单约束，快速测试 |
| **三方匹配V2** | ⭐⭐⭐⭐ 快 | ⭐⭐⭐⭐⭐ 最高 | **日常使用（推荐）** |
| 原始引擎 | ⭐⭐ 慢 | ⭐⭐ | 仅用于对比实验 |

## 🎨 两种视图对比

### 周视图（排课结果）⭐ 推荐

**优点**:
- ✅ 专注排课结果，无干扰
- ✅ 拖拽调整课程时间
- ✅ 点击查看详情
- ✅ 彩色编码清晰
- ✅ 冲突自动验证

**适合**: 查看和调整排课结果

### 月视图（完整日历）

**优点**:
- ✅ 完整FullCalendar功能
- ✅ 显示学生可用性
- ✅ 月度总览
- ✅ 多视图切换（月/周/日）

**适合**: 总体规划和查看可用性

## ⚡ 推荐工作流程

### 首次使用

```
1. 导入数据
   └→ 学生Excel（必需）
   └→ 教师数据（必需）
   └→ 教室数据（可选，会使用虚拟教室）

2. （可选）AI数据清洗
   └→ 点击"AI智能清洗"
   └→ 等待AI处理

3. 选择算法
   └→ 推荐："三方匹配V2"

4. 选择学生
   └→ 勾选要排课的学生

5. 一键排课
   └→ 点击右下角按钮
   └→ 查看结果弹窗

6. 查看调整
   └→ 切换到"周视图"
   └→ 拖拽调整（如需要）
```

### 日常使用

```
1. 已有数据（自动加载）
2. 添加新学生/教师
3. 勾选新学生
4. 一键排课
5. 查看结果
```

## 🔧 常见操作

### 更改算法

1. 日历上方点击"排课算法"下拉框
2. 选择新算法
3. 重新点击"一键排课"按钮

### 切换视图

1. 日历上方点击视图按钮
2. "周视图" ↔ "月视图"
3. 立即切换，无需刷新

### 调整课程时间

1. 切换到"周视图（排课结果）"
2. 拖动课程块到新时间
3. 系统自动验证冲突
4. 保存调整

### 删除课程

**方式1（周视图）**:
1. 点击课程块
2. 在详情弹窗点"删除"

**方式2（月视图）**:
1. 点击事件
2. 在FullCalendar弹窗点"删除"

## ⚠️ 重要提示

### 算法选择建议

**日常排课** → 三方匹配V2  
**快速测试** → 贪心算法  
**实验对比** → 原始引擎

### 视图选择建议

**查看排课结果** → 周视图  
**总体规划** → 月视图  
**调整课程** → 周视图  
**查看可用性** → 月视图

### LocalStorage注意

Experiment3和Function共享相同的LocalStorage键：
- `students`
- `teachers`
- `classrooms`
- `events`

**影响**: 修改一个会影响另一个

## 📚 完整文档

- **快速开始**: 本文档
- **实施总结**: `docs/experiment3-optimization-summary.md`
- **设置文档**: `docs/experiment3-setup.md`
- **页面对比**: `docs/experiments-comparison.md`
- **Function原文档**: `Experiment3/AI排课使用说明.md` 等

## 🐛 故障排查

### 排课后无显示
→ 检查算法选择  
→ 打开Console查看日志  
→ 尝试切换到周视图

### FullCalendar无结果
→ 切换到"月视图（完整日历）"  
→ 检查是否已排课

### 拖拽不工作
→ 确保在"周视图（排课结果）"  
→ 确保有排课结果

## ✅ 验证清单

使用前请确认：

- [ ] 页面可以正常访问 `/experiment3`
- [ ] 可以导入Excel数据
- [ ] 可以选择算法
- [ ] 点击"一键排课"可以执行
- [ ] 可以看到排课结果
- [ ] 可以切换视图
- [ ] 可以拖拽调整（周视图）
- [ ] AI功能正常（如已配置）

## 🎉 开始使用

**Experiment3现已完全优化，可以投入使用！**

立即访问: `/experiment3`  
选择算法: 三方匹配V2  
开始排课: 一键完成

---

**更新时间**: 2026-02-02  
**版本**: 2.0（优化版）  
**状态**: ✅ 生产可用
